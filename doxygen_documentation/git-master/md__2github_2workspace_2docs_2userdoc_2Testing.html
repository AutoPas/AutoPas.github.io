<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AutoPas</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="https://raw.githubusercontent.com/AutoPas/AutoPas/master/docs/graphics/AutoPasLogo_Small.svg">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript">
    function doOnLoad() {
        if (!window.location.href.startsWith("file://")) {
            // this is only done if we are on an actual webserver, where we expect to have ../autopas_onpageload.js
            var script = document.createElement('script');
            script.onload = function () {
                on_page_load();
            };
            script.src = "../onpageload.js";
            document.head.appendChild(script); //or something of the likes
        } else {
            var version_selector = document.getElementById("autopas_version_selector");
            var option = document.createElement("option");
            option.text = "local";
            option.value = "local";
            version_selector.appendChild(option);
        }
    }
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body onload="doOnLoad()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="main_selector">
    </div>
	<!--BEGIN VERSION INFO-->
	<div id="version_selector">
        <label for="autopas_version_selector">Version:</label>
        <select id="autopas_version_selector">
        </select>
	</div>
	<!--END VERSION INFO-->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://autopas.github.io/"><img style="height: 56px;" alt="AutoPas" src="AutoPasLogo_Large.svg"/></a>
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
     <td style="float:right"><div id="githublink"><a href="https://github.com/AutoPas/AutoPas"><img border="0" alt="GitHub" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" height="56px"></a></div></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Testing </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md67"></a> AutoPas uses <a href="https://github.com/google/googletest">googletest</a> as its testing framework, which exposes tests to <a href="https://cmake.org/cmake/help/latest/manual/ctest.1.html"><code>ctest</code></a>, the CMake test driver.</p>
<p>We do not distinguish between unit/integration/smoke/etc. in the tests directory <code>/tests/</code>. However, our tests, in general, fall into a few categories:</p><ul>
<li><p class="startli">Regular GTests</p>
<p class="startli">Everything in <a href="https://github.com/AutoPas/AutoPas/blob/master/tests/testAutopas/"><code>/tests/testAutopas/</code></a></p>
</li>
<li><p class="startli">GTests with MPI</p>
<p class="startli">Everything in <a href="https://github.com/AutoPas/AutoPas/blob/master/tests/MPIParallelAutoPasTests/"><code>/tests/MPIParallelAutoPasTests/</code></a></p>
</li>
<li><p class="startli">Test involving examples</p>
<p class="startli">Declared in the examples' CMakeLists files. <a href="https://github.com/AutoPas/AutoPas/blob/master/examples/md-flexible/CMakeLists.txt">E.g. md-flexible</a>.</p>
</li>
<li>GTests for examples This only exists for md-flexible in <code>examples/md-flexible/tests</code>. See md-flexible's <a href="https://github.com/AutoPas/AutoPas/blob/master/examples/md-flexible/README.md">README</a> for more information.</li>
</ul>
<h1><a class="anchor" id="autotoc_md68"></a>
Running Tests</h1>
<p>There are multiple possibilities to run tests from the <code>/tests/</code> directory. In order of recommendation:</p>
<ol type="1">
<li>Using <code>ctest</code>: <div class="fragment"><div class="line">ctest # add --verbose or --output-on-failure for more details on the tests and -j N to run N tests in parallel </div>
</div><!-- fragment --> To only run specific tests, use arguments like <code>-R</code> (run tests matching regex) and <code>-E</code> (exclude tests matching regex) <div class="fragment"><div class="line">ctest -R &#39;Array.*testAdd&#39; -E &#39;Double&#39;</div>
</div><!-- fragment --></li>
<li>Using the <code>make</code> target: <div class="fragment"><div class="line">make test</div>
</div><!-- fragment --></li>
<li>Directly launching the test executable: <div class="fragment"><div class="line">tests/testAutopas/runTests</div>
</div><!-- fragment --> To only run specific tests, use arguments <div class="fragment"><div class="line">tests/testAutopas/runTests --gtest_filter=ArrayMathTest.testAdd*</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md69"></a>
Running Example Tests</h2>
<p>To enable the example simulations, run </p><div class="fragment"><div class="line">ctest -C checkExamples</div>
</div><!-- fragment --><p> Example tests defined in <code>CMake</code> files are disabled by default. If you only want to run only those specific to one example, in your build directory, decent into its directory and run the command from above there.</p>
<h1><a class="anchor" id="autotoc_md70"></a>
Debugging Tests</h1>
<p>Many IDEs (e.g., CLion) have integrated support for googletest, and you can debug the tests directly within the IDE.</p>
<p>If you prefer <code>gdb</code> from the command line:</p><ol type="1">
<li>Find the command to start your desired test with <code>-N</code> (aka. <code>--show-only</code>) plus <code>-V</code> (aka. <code>--verbose</code>): <div class="fragment"><div class="line">ctest -R &#39;Array.*testAdd&#39; -N -V</div>
</div><!-- fragment --></li>
<li>Start the test with <code>gdb</code> <div class="fragment"><div class="line">gdb --args ${TestCommand}</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md71"></a>
MPI tests</h2>
<p>MPI parallel applications like md-flexible can be a bit tricky to debug, so make sure you debug without MPI whenever you can. If you have to debug MPI code, the trick is to attach one <code>gdb</code> per rank and use as few ranks as needed. Remember to also limit the number of OpenMP threads to not overload your system.</p>
<div class="fragment"><div class="line"># Maximum number of threads for an eight-core processor</div>
<div class="line">OMP_NUM_THREADS=2 mpirun -n 4 -xterm -1! gdb --args examples/md-flexible/md-flexible</div>
</div><!-- fragment --><p> Explanation:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Command Snippet   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>OMP_NUM_THREADS=2</code>   </td><td class="markdownTableBodyNone">Shell environment variable to lock OpenMP to threads per rank (=process).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>mpirun -n 4</code>   </td><td class="markdownTableBodyNone">Four ranks will be started.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><code>-xterm -1!</code>   </td><td class="markdownTableBodyNone">Open an <code>xTerm</code> console window for ranks. <code>-1</code> indicates that it should be done for all ranks, no matter the count, <code>!</code> ensures the windows do not immediately close when the program stops or crashes so that you can read the output.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><code>gdb --args</code>   </td><td class="markdownTableBodyNone">Launches the debugger. Everything that follows is treated as arguments to <code>gdb</code>.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md72"></a>
Creating Coverage Reports</h1>
<p>The following commands can be used to create a coverage report in the form of HTML output. Please note that this is only supported with GCC, and debugging mode must be enabled to create coverage reports. Furthermore, LCOV version &gt;= 2.0 must be installed.</p>
<div class="fragment"><div class="line">cd $BUILD_DIR</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Debug -DAUTOPAS_BUILD_TESTS=ON -DAUTOPAS_ENABLE_COVERAGE=ON ..</div>
<div class="line">make coverage</div>
</div><!-- fragment --><p>After these commands have been executed, a folder named <code>$BUILD_DIR/coverage</code> can be found which contains the HTML output. This can be downloaded and viewed in a browser.</p>
<h1><a class="anchor" id="autotoc_md73"></a>
Related Files and Folders</h1>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
